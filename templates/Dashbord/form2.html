{% extends 'Dashbord/base.html' %}
{% load static %}
{% block content %}
<div class="o_main">
   <div class="o_main_content">
      <div class="o_control_panel o_breadcrumb_full">
         <div class="a_cp_top">
            <ol class="breadcrumb">
               <li><a>Application Type</a></li>
               <li class="active">{{website}}</li>
            </ol>
            {% comment %} 
            <div class="o_cp_searchview" style="display: none;">
               <div class="o_searchview o_hidden">
                  <span class="o_searchview_more fa fa-search-minus" title="Advanced Search..."></span>
                  <ul class="dropdown-menu o_searchview_autocomplete" role="menu" style="display: none;"></ul>
                  <input class="o_searchview_input" placeholder="Search..." type="text">
               </div>
            </div>
            {% endcomment %}
         </div>
         <div class="a_cp_bottom">
            <div class="o_cp_buttons">
               <div>
                  <div class="o_form_buttons_view">
                     <!-- <button accesskey="a" class="btn btn-primary btn-sm o_form_button_edit" type="button">
                        Edit
                        </button> -->
                     <a href="#submit" <button  accesskey="c" class="btn btn-default btn-sm o_form_button_create" type="button">
                     Create
                     </button></a>
                  </div>
               </div>
            </div>
            <div class="o_cp_sidebar">
               <div class="btn-group">
                  {% comment %} 
                  <div class="btn-group o_dropdown">
                     <button aria-expanded="false" class="o_dropdown_toggler_btn btn btn-sm dropdown-toggle" data-toggle="dropdown">
                     Print <span class="caret"></span>
                     </button>
                     <ul class="dropdown-menu" role="menu">
                        <li>
                           <a data-index="0" data-section="print" href="http://74.208.168.47:8069/web#" target="_blank">
                           Due Payments
                           </a>
                        </li>
                        <li>
                           <a data-index="1" data-section="print" href="http://74.208.168.47:8069/web#" target="_blank">
                           Partner Ledger
                           </a>
                        </li>
                     </ul>
                  </div>
                  {% endcomment %}
                  <div class="btn-group o_dropdown">
                     <button aria-expanded="false" class="o_dropdown_toggler_btn btn btn-sm dropdown-toggle" data-toggle="dropdown">
                     API Attachment(s) <span class="caret"></span>
                     </button>
                     <ul class="dropdown-menu" role="menu">
                        <li class="o_sidebar_add_attachment">
                           <div class="o_hidden_input_file ">
                              <form class="o_form_binary_form" enctype="multipart/form-data" method="post" target="oe_fileupload486">
                                 <input name="csrf_token" type="hidden" value="c5dc48a48626963ba3e1fc62ce328d5e3a48664co">
                                 <input name="callback" type="hidden" value="oe_fileupload486">
                                 <input class="o_input_file" name="ufile" type="file" multiple="multiple">
                                 <input name="model" type="hidden" value="res.partner">
                                 <input name="id" type="hidden" value="1735936">
                                 <span>Add Endpoints DOC...</span>
                              </form>
                              <iframe style="display: none" id="oe_fileupload486" name="oe_fileupload486" src="./042 RESTAURANT - ENUGUDISCO_files/saved_resource.html"></iframe>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="o_cp_pager">
               <div>
                  <span class="o_pager_counter">
                  <span class="o_pager_value">2</span> / <span class="o_pager_limit">8</span>
                  </span>
                  <span class="btn-group btn-group-sm">
                  <button aria-label="Previous" class="fa fa-chevron-left btn btn-icon o_pager_previous" type="button" accesskey="p"></button>
                  <button aria-label="Next" class="fa fa-chevron-right btn btn-icon o_pager_next" type="button" accesskey="n"></button>
                  </span>
               </div>
            </div>
            <div class="btn-group btn-group-sm o_cp_switch_buttons o_hidden"></div>
         </div>
      </div>
      <div class="o_content">
         <div class="o_view_manager_content">
            <div>
               <div class="o_form_view o_form_editable">
                  <div class="o_form_sheet_bg">
                     <div class="o_form_statusbar">
                        <div class="o_statusbar_buttons">
                           <div class="o_field_many2manytags o_field_widget" style="margin-top: 9px;">
                              <button  id='valuelist'  data-color="10" data-id="22" data-index="0"  class="btn badge btn-sm btn-default oe_highlight"></button>
                              {% comment %} <span id='valuelist' data-color="10" data-id="22" data-index="0" class="badge dropdown o_tag_color_10">
                              </span> {% endcomment %}
                           </div>
                           {% comment %} <button class="btn btn-sm btn-default oe_highlight">Juice Transactions</button><button class="btn btn-sm btn-default oe_highlight">Update Juice Feeder|Transformer</button><button class="btn btn-sm btn-default oe_highlight">Update Juice Others</button><button class="btn btn-sm btn-default oe_highlight">Get KeyChange</button><button class="btn btn-sm btn-default oe_highlight">Free Issue</button><button class="btn btn-sm btn-default oe_highlight">Set Max Power</button><button class="btn btn-sm btn-default oe_highlight">Juice Account</button><button class="btn btn-sm btn-default oe_highlight">Juice Meter Assign</button><button class="btn btn-sm btn-default oe_highlight">Update Juice Tariff</button> {% endcomment %}
                        </div>
                     </div>
                     <div class="o_form_sheet">
                        <div class="o_not_full oe_button_box tabs">
                           <button class="btn btn-sm oe_stat_button">
                              <div class="fa fa-fw o_button_icon fa-calendar"></div>
                              <div name="meeting_count" class="o_field_widget o_stat_info o_readonly_modifier">
                                 <span class="o_stat_value">Unsuccessful</span>
                                 <span class="o_stat_text">Lunched Web.</span>
                              </div>
                           </button>
                           <button class="btn btn-sm oe_stat_button o_res_partner_tip_opp">
                              <div class="fa fa-fw o_button_icon fa-star"></div>
                              <div name="opportunity_count" class="o_field_widget o_stat_info o_readonly_modifier">
                                 <span class="o_stat_value">successfully</span>
                                 <span class="o_stat_text">Lunched Web.</span>
                              </div>
                           </button>
                           <button class="btn btn-sm oe_stat_button">
                              <div class="fa fa-fw o_button_icon fa-globe"></div>
                              <div class="o_stat_info published o_field_widget" name="website_published">
                                 <span class="o_stat_text o_value text-secondry">Developing..</span>
                                 <span class="o_stat_text">Stage- Web</span>
                              </div>
                           </button>
                           <button class="btn btn-sm oe_stat_button">
                              <div class="fa fa-fw o_button_icon fa-usd"></div>
                              <div name="sale_order_count" class="o_field_widget o_stat_info o_readonly_modifier">
                                 <span class="o_stat_value"></span>
                                 <span class="o_stat_text">STAGE FIVE</span>
                              </div>
                           </button>
                           <button class="btn btn-sm oe_stat_button">
                              <div class="fa fa-fw o_button_icon fa-book"></div>
                              <div name="contracts_count" class="o_field_widget o_stat_info o_readonly_modifier">
                                 <span class="o_stat_value"></span>
                                 <span class="o_stat_text">STAGE FOUR</span>
                              </div>
                           </button>
                           <button class="btn btn-sm oe_stat_button">
                              <div class="fa fa-fw o_button_icon fa-archive"></div>
                              <div class="o_stat_info o_field_widget" name="active"><span class="o_stat_text o_not_hover text-success">STAGE THREE</span><span class="o_stat_text o_hover text-danger">STAGE THREE</span></div>
                           </button>
                           <button class="btn btn-sm oe_stat_button" style="background:#fff">
                              <div class="fa fa-fw o_button_icon fa-pencil-square-o"></div>
                              <div class="o_form_field o_stat_info"><span class="o_stat_value"><span class="o_field_monetary o_field_number o_field_widget o_readonly_modifier" name="invoice_paid_amount" data-original-title="" title=""></span></span><span class="o_stat_text">STAGE TWO</span></div>
                           </button>
                           <button class="btn btn-sm oe_stat_button oe_inline">
                              <div class="fa fa-fw o_button_icon fa-ticket"></div>
                              <div name="support_ticket_string" class="o_field_widget o_stat_info o_readonly_modifier">
                                 <span class="o_stat_value"></span>
                                 <span class="o_stat_text">STAGE ONE</span>
                              </div>
                           </button>
                        </div>
                        <form id="form2" method="POST" onsubmit="return submitFormData(this)" >
                           {% csrf_token %}
                           <div class="o_field_one2many o_field_widget o_field_x2many o_field_x2many_list" name="prepaid_trans">
                              <div class="table-responsive">
                                 <table class="o_list_view table table-condensed table-striped o_list_view_ungrouped">
                                    <thead>
                                       <tr>
                                          <th class="o_column_sortable">Programing Language</th>
                                          <th class="o_column_sortable">Version 1 / 9</th>
                                          <th class="o_column_sortable">Version 2 / 9</th>
                                          <th class="o_column_sortable">Version 3 / 9</th>
                                          <th class="o_column_sortable">Version 4 / 9</th>
                                          <th class="o_column_sortable">Version 5 / 9</th>
                                          <th class="o_column_sortable">Version 6 / 9</th>
                                       </tr>
                                    </thead>
                                    <tbody class="ui-sortable">

                                       {% for lan in languages %}
                                       <tr class="o_data_row">
                                          <td class="o_data_cell">
                                             <image style="width:34px;height:30px" src="{{lan.logo.url}}">
                                            {{lan.name}}
                                          </td>
                                          <td class="o_data_cell">
                                             VS 1.9
                                             <div class="o_field_boolean o_field_widget o_checkbox">
                                                <input type="checkbox" class='checkbox' id='checkbox1_{{ forloop.counter }}' value="{{ lan.name }} - VS 1.9" name="name" onclick="toggleCheckbox(this)" data-row-index="{{ forloop.counter }}">
                                                <span></span>
                                            </div>
                                          </td>
                                          <td class="o_data_cell">
                                             VS 2.9 
                                             <div class="o_field_boolean o_field_widget o_checkbox" name="allow_meter">
                                                <input type="checkbox" class='checkbox' id='checkbox1_{{ forloop.counter }}' value="{{lan.name}} - VS 2.9" name="name" onclick="toggleCheckbox(this)" data-row-index="{{ forloop.counter }}"><span>
                                                </span>
                                             </div>
                                          </td>
                                          <td class="o_data_cell">
                                             VS 3.9 
                                             <div class="o_field_boolean o_field_widget o_checkbox">
                                                <input type="checkbox" class='checkbox' id='checkbox1_{{ forloop.counter }}' value="{{lan.name}} - VS 3.9"name="name" onclick="toggleCheckbox(this)" data-row-index="{{ forloop.counter }}">
                                                <span></span>
                                             </div>
                                          </td>
                                          <td class="o_data_cell">
                                             VS 4.9 
                                             <div class="o_field_boolean o_field_widget o_checkbox">
                                                <input type="checkbox" class='checkbox' id='checkbox1_{{ forloop.counter }}' value="{{lan.name}} - VS 4.9 " name="name" onclick="toggleCheckbox(this)" data-row-index="{{ forloop.counter }}"><span></span>
                                             </div>
                                          </td>
                                          <td class="o_data_cell">
                                             VS 5.9 
                                             <div class="o_field_boolean o_field_widget o_checkbox" name="allow_meter">
                                                <input type="checkbox" class='checkbox' id='checkbox1_{{ forloop.counter }}' value="{{lan.name}} - VS 5.9" name="name" onclick="toggleCheckbox(this)" data-row-index="{{ forloop.counter }}"><span></span>
                                             </div>
                                          </td>
                                          <td class="o_data_cell">
                                             VS 6.9 
                                             <div class="o_field_boolean o_field_widget o_checkbox" name="allow_meter">
                                                <input type="checkbox" class='checkbox' id='checkbox1_{{ forloop.counter }}'  value="{{lan.name}} - VS 6.9" name="name" onclick="toggleCheckbox(this)" data-row-index="{{ forloop.counter }}"><span></span>
                                             </div>
                                          </td>
                                       </tr>
                                       {% endfor %}
                                  
                                     
                                 
                                    </tbody>
                                    <tfoot>
                                       <tr>
                                          <td></td>
                                          <td></td>
                                          <td></td>
                                          <td></td>
                                          <td></td>
                                          <td></td>
                                          <td></td>
                                       </tr>
                                    </tfoot>
                                 </table>
                                 <div class="o_form_buttons_edit">
                                    <button accesskey="s" style="float: right;" class="btn btn-default btn-sm o_form_button_save" id="submit" type="submit">
                                    Next Page
                                    </button>
                                 </div>
                              </div>
                           </div>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<script>
   function toggleCheckbox(checkbox) {
       var row = checkbox.closest('.o_data_row');
       var checkboxes = row.querySelectorAll('input[type="checkbox"]');
       checkboxes.forEach(function(cb) {
           if (cb !== checkbox && cb.checked) {
               cb.checked = false;
           }
       });
   }

   function submitFormData() {
       var form = document.getElementById("form2");
       var selectedLanguages = {};
       var checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
       
       checkboxes.forEach(function(checkbox) {
           var rowIndex = checkbox.getAttribute('data-row-index');
           selectedLanguages[rowIndex] = checkbox.value;
       });

       var confirmed = confirm("Are you sure you want to go to the next page?");
       if (confirmed) {
           // Constructing a list of selected languages
           var selectedLanguagesList = Object.values(selectedLanguages);
           var hiddenInput = document.createElement("input");
           hiddenInput.setAttribute("type", "hidden");
           hiddenInput.setAttribute("name", "selected_languages");
           hiddenInput.setAttribute("value", selectedLanguagesList.join(","));
           form.appendChild(hiddenInput);
           return true; // Allow form submission after confirmation
       } else {
           return false; // Prevent form submission if not confirmed
       }
   }
</script>


{% endblock content %}
